"use strict";(self["webpackChunkvue_pjt"]=self["webpackChunkvue_pjt"]||[]).push([[265],{9265:function(t,e,a){a.r(e),a.d(e,{default:function(){return G}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{attrs:{id:"map"}}),a("p",[a("input",{attrs:{type:"checkbox",id:"chkUseDistrict"},on:{click:t.setOverlayMapTypeId}}),t._v(" 지적편집도 정보 보기 "),a("input",{attrs:{type:"checkbox",id:"chkTerrain"},on:{click:t.setOverlayMapTypeId}}),t._v(" 지형정보 보기 "),a("input",{attrs:{type:"checkbox",id:"chkTraffic"},on:{click:t.setOverlayMapTypeId}}),t._v(" 교통정보 보기 "),a("input",{attrs:{type:"checkbox",id:"chkBicycle"},on:{click:t.setOverlayMapTypeId}}),t._v(" 자전거도로 정보 보기 ")]),a("apt-search-bar",{staticClass:"apt-search-form",on:{searchApt:t.searchApt}}),a("apt-list",{staticClass:"apt-list-form",attrs:{category:t.category,areaApts:t.areaApts},on:{showDetail:t.showDetail}}),t.detailToggle?a("apt-detail",{staticClass:"apt-detail-form",attrs:{apt:t.apt},on:{closeDetail:t.closeDetail,printRoadView:t.printRoadView}}):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:t.roadViewToggle,expression:"roadViewToggle"}],staticClass:"apt-roadview-form"},[a("div",{staticClass:"closeRoadView"},[a("b-icon",{staticClass:"roadViewBack",attrs:{icon:"arrow-right",scale:"2",variant:"dark"},on:{click:t.closeRoadView}})],1),a("div",{staticClass:"apt-roadview",attrs:{id:"roadview"}})]),t._m(0)],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"atc-info-form"},[a("div",{staticClass:"map_wrap"},[a("ul",{attrs:{id:"category"}},[a("li",{attrs:{id:"BK9","data-order":"0"}},[a("span",{staticClass:"category_bg bank"}),t._v(" 은행 ")]),a("li",{attrs:{id:"MT1","data-order":"1"}},[a("span",{staticClass:"category_bg mart"}),t._v(" 마트 ")]),a("li",{attrs:{id:"PM9","data-order":"2"}},[a("span",{staticClass:"category_bg pharmacy"}),t._v(" 약국 ")]),a("li",{attrs:{id:"OL7","data-order":"3"}},[a("span",{staticClass:"category_bg oil"}),t._v(" 주유소 ")]),a("li",{attrs:{id:"CE7","data-order":"4"}},[a("span",{staticClass:"category_bg cafe"}),t._v(" 카페 ")]),a("li",{attrs:{id:"CS2","data-order":"5"}},[a("span",{staticClass:"category_bg store"}),t._v(" 편의점 ")]),a("li",{attrs:{id:"MT1","data-order":"0"}},[a("span",{staticClass:"category_bg store"}),t._v(" 대형마트 ")]),a("li",{attrs:{id:"PS3","data-order":"1"}},[a("span",{staticClass:"category_bg store"}),t._v(" 어린이집 ")]),a("li",{attrs:{id:"SC4","data-order":"2"}},[a("span",{staticClass:"category_bg store"}),t._v(" 학교 ")]),a("li",{attrs:{id:"PK6","data-order":"3"}},[a("span",{staticClass:"category_bg store"}),t._v(" 주차장 ")]),a("li",{attrs:{id:"SW8","data-order":"4"}},[a("span",{staticClass:"category_bg store"}),t._v(" 지하철역 ")]),a("li",{attrs:{id:"AD5","data-order":"5"}},[a("span",{staticClass:"category_bg store"}),t._v(" 숙박 ")]),a("li",{attrs:{id:"HP8","data-order":"0"}},[a("span",{staticClass:"category_bg store"}),t._v(" 병원 ")]),a("li",{attrs:{id:"FD6 ","data-order":"1"}},[a("span",{staticClass:"category_bg store"}),t._v(" 음식점 ")])])])])}],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"apt-search-form"},[a("div",{staticClass:"search-title"},[t._v("지역 검색")]),a("b-form-select",{staticClass:"search-option",attrs:{options:t.sidos},on:{change:t.gugunList},model:{value:t.selected_sido,callback:function(e){t.selected_sido=e},expression:"selected_sido"}},[t._v("시도")]),a("b-form-select",{staticClass:"search-option",attrs:{options:t.guguns},model:{value:t.selected_gugun,callback:function(e){t.selected_gugun=e},expression:"selected_gugun"}},[t._v("구군")]),a("b-button",{staticClass:"btn-area-search",attrs:{variant:"outline-primary"},on:{click:t.searchApt}},[t._v("검색")]),a("b-input-group",{staticClass:"filter-input-group",attrs:{size:t.sm},on:{click:t.openFilter}},[a("b-form-input",{attrs:{disabled:"",placeholder:"필터 추가",size:"sm"}}),a("b-input-group-append",[a("b-button",{staticClass:"filterToggle",attrs:{variant:"outline-primary",size:"sm"}},[t._v("필터")])],1)],1),t.toggleFilter?a("div",[a("b-input-group",{staticClass:"mt-3"},[a("b-form-input",{attrs:{placeholder:"원하는 아파트 이름을 입력하세요"},on:{keyup:t.setName},model:{value:t.filterAptName,callback:function(e){t.filterAptName=e},expression:"filterAptName"}})],1)],1):t._e()],1)},r=[],n=a(4665);const l="aptStore";var c={name:"aptSearchBar",data(){return{selected_sido:null,selected_gugun:null,selected_dong:null,toggleFilter:!1,filterAptName:""}},computed:{...(0,n.rn)(l,["sidos","guguns"])},created(){this.CLEAR_SIDO_LIST(),this.getSido(),this.CLEAR_APTS(),this.CLEAR_APT(),this.SET_FILTERAPTNAME("")},methods:{...(0,n.nv)(l,["getSido","getGugun","getAptList","setSelectedSido"]),...(0,n.OI)(l,["CLEAR_SIDO_LIST","CLEAR_GUGUN_LIST","SET_SELECTED_SIDO","CLEAR_APTS","CLEAR_APT","SET_FILTERAPTNAME"]),gugunList(){this.CLEAR_GUGUN_LIST(),this.selected_gugun=null,this.selected_sido&&this.getGugun(this.selected_sido)},searchApt(){if(this.selected_gugun){for(let t of this.sidos)this.selected_sido===t.value&&this.setSelectedSido(t.text);this.$emit("searchApt",this.selected_gugun)}},openFilter(){this.SET_FILTERAPTNAME(""),this.toggleFilter=!this.toggleFilter},setName(){this.SET_FILTERAPTNAME(this.filterAptName)}}},d=c,p=a(1001),m=(0,p.Z)(d,o,r,!1,null,"26880d4a",null),h=m.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",[a("div",{staticClass:"info-list-title",on:{click:t.toggleList}},[t._v("아파트 매매 정보")]),t.listToggle?a("div",{staticClass:"info-list-contents"},t._l(t.areaApts,(function(e,s){return a("apt-list-item",{key:s,staticClass:"info-list-content",attrs:{apt:e},on:{showDetail:t.showDetail}})})),1):t._e(),a("div",{staticClass:"info-list-title",on:{click:t.toggleAround}},[t._v("주변 정보")]),t.aroundToggle?a("div",{staticClass:"info-list-contents"},t._l(t.category,(function(t,e){return a("apt-category-item",{key:e,staticClass:"info-list-content",attrs:{item:t}})})),1):t._e()])},u=[],k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"info-list-content",on:{click:t.showDetail}},[a("b-row",{staticClass:"info-list-content-info"},[a("div",{staticClass:"info-list-title"},[t._v(t._s(t.apt.아파트))]),a("div",{staticClass:"info-list-price"},[t._v(" 거래 금액 : "+t._s(t._f("addMillionWon")(t.apt.거래금액))+" ")]),a("div",{staticClass:"info-list-address"},[a("span",[t._v("주소 : "+t._s(t.apt.도로명)+" "+t._s(t._f("removeZeroAddress")(t.apt.도로명건물본번호코드)))])])])],1)},v=[],_={name:"aptListItem",props:{apt:Object},methods:{showDetail(){this.$emit("showDetail",this.apt)}},filters:{addMillionWon(t){return t+" 만원"},removeZeroAddress(t){return Number(t)}}},f=_,y=(0,p.Z)(f,k,v,!1,null,"5e3580da",null),w=y.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"info-list-content"},[a("b-row",{staticClass:"info-list-content-info"},[a("div",{staticClass:"info-list-title"},[t._v(t._s(t.item.place_name))]),a("div",{staticClass:"info-list-price"},[t._v("주소 : "+t._s(t.item.address_name))]),a("div",{staticClass:"info-list-price"},[a("a",{attrs:{href:t.item.place_url}},[t._v(" 카카오맵 검색 ")])])])],1)},C=[],b={name:"aptListItem",props:{item:Object}},L=b,A=(0,p.Z)(L,T,C,!1,null,"2281ab92",null),I=A.exports;const M="aptStore";var E={name:"aptList",props:{category:Array,areaApts:Array},components:{AptListItem:w,AptCategoryItem:I},data(){return{listToggle:!1,aroundToggle:!1}},computed:{...(0,n.rn)(M,["apts"])},methods:{showDetail(t){this.$emit("showDetail",t)},toggleList(){this.listToggle=!this.listToggle},toggleAround(){this.aroundToggle=!this.aroundToggle}}},S=E,D=(0,p.Z)(S,g,u,!1,null,"8763b49a",null),R=D.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"closeDetail"},[a("b-icon",{attrs:{icon:"arrow-right",scale:"2",variant:"dark"},on:{click:t.closeDetail}})],1),a("div",{staticClass:"apt-detail-info"},[a("hr"),a("p",{staticClass:"apt-detail-title"},[t._v(t._s(t._f("aptName")(t.apt.아파트)))]),a("hr"),a("p",{staticClass:"apt-detail-price"},[t._v("금액 : "+t._s(t._f("addMillionWon")(t.apt.거래금액)))]),a("p",{staticClass:"apt-detail-build"},[t._v("건축연도 : "+t._s(t.apt.건축년도))]),a("p",{staticClass:"apt-detail-address-road"},[t._v(" 주소 : "+t._s(t.apt.도로명)+" "+t._s(t._f("removeZeroAddress")(t.apt.도로명건물본번호코드))+" ")]),a("p",{staticClass:"apt-detail-floar"},[t._v("층 : "+t._s(t.apt.층))]),a("hr")]),t.userInfo?a("div",[t.dibToggle?a("div",{staticClass:"heart",on:{click:t.remove}},[a("b-icon",{attrs:{icon:"heart-fill",variant:"danger"}}),t._v(" 매물 찜 취소 ")],1):t._e(),t.dibToggle?t._e():a("div",{staticClass:"heart",on:{click:t.addNewDib}},[a("b-icon",{attrs:{icon:"heart",variant:"danger"}}),t._v(" 매물 찜 ")],1)]):t._e(),a("p",{staticClass:"openRoadView",on:{click:t.printRoadView}},[t._v("로드뷰")])])},P=[];const O="memberStore",x="dibStore";var V={name:"aptDetail",props:{apt:Object},data(){return{dibToggle:"false"}},computed:{...(0,n.rn)(O,["userInfo"]),...(0,n.rn)(x,["dibList"])},created(){this.userInfo&&(this.getList(this.userInfo.userid),this.toggleDib())},filters:{aptName(t){return t+" 아파트"},addMillionWon(t){return t+" 만원"},removeZeroAddress(t){return Number(t)}},methods:{...(0,n.nv)(x,["addDib","getList","removeDib"]),closeDetail(){this.$emit("closeDetail")},printRoadView(){this.$emit("printRoadView",this.apt.index)},async addNewDib(){let t={userid:this.userInfo.userid,aptName:this.apt.아파트,la:this.apt.La,ma:this.apt.Ma,buildyear:this.apt.건축년도,floor:this.apt.층,address:this.apt.도로명,addressCode:this.apt.도로명건물본번호코드,serialNumber:this.apt.일련번호};this.addDib(t),this.getList(this.userInfo.userid),setTimeout((()=>{this.getList(this.userInfo.userid),setTimeout((()=>{this.toggleDib()}),100)}),100)},remove(){let t={floor:this.apt.층,serialNumber:this.apt.일련번호};this.removeDib(t),setTimeout((()=>{this.getList(this.userInfo.userid),setTimeout((()=>{this.toggleDib()}),100)}),100)},toggleDib(){this.dibList.some((t=>t.serialNumber==this.apt.일련번호&&t.floor==this.apt.층))?this.dibToggle=!0:this.dibToggle=!1}}},B=V,F=(0,p.Z)(B,N,P,!1,null,"6e31fdea",null),$=F.exports;const Z="aptStore";var z={name:"aptMap",data(){return{markers:{},markerPositions:[],mapTypes:{},apt:"",category:[],areaApts:[],infoToggle:!1,detailToggle:!1,roadViewToggle:!1}},components:{AptSearchBar:h,AptList:R,AptDetail:$},mounted(){if(window.kakao&&window.kakao.maps)this.initMap();else{const t=document.createElement("script");t.onload=()=>kakao.maps.load(this.initMap),t.src="//dapi.kakao.com/v2/maps/sdk.js?autoload=false&appkey=04013d521172d5dd8708bd56e4a64b40&libraries=services",document.head.appendChild(t)}},computed:{...(0,n.rn)(Z,["sidos","guguns","apts","sido"])},methods:{...(0,n.nv)(Z,["getAptList"]),getInfo(){let t=this.map.getBounds(),e=t.getSouthWest(),a=t.getNorthEast();this.areaApts=[],this.apts.some((t=>{t.La>e.La&&t.Ma>e.Ma&&t.La<a.La&&t.Ma<a.Ma&&this.areaApts.push(t)})),setTimeout((()=>{console.log(this.areaApts)}),100)},searchApt(t){if(t){this.markerPositions=[];let e=this;this.closeDetail(),this.closeRoadView(),this.getAptList(t),setTimeout((function(){e.getAptPositions(),e.infoToggle=!0}),500)}},initMap(){const t=document.getElementById("map"),e={center:new kakao.maps.LatLng(33.450701,126.570667),level:5};this.map=new kakao.maps.Map(t,e),this.createCategorySearch(),this.mapTypes={terrain:kakao.maps.MapTypeId.TERRAIN,traffic:kakao.maps.MapTypeId.TRAFFIC,bicycle:kakao.maps.MapTypeId.BICYCLE,useDistrict:kakao.maps.MapTypeId.USE_DISTRICT}},displayMarker(){this.markers.length>0&&this.markers.forEach((t=>t.setMap(null))),this.markers=[];let t="https://cdn3.iconfinder.com/data/icons/start-up-4/44/office-512.png",e=new kakao.maps.Size(50,55),a={offset:new kakao.maps.Point(27,69)},s=new kakao.maps.MarkerImage(t,e,a);if(this.markerPositions.length>0){let t=this;for(let a=0;a<this.markerPositions.length;a++)this.markers[a]=new kakao.maps.Marker({map:this.map,position:this.markerPositions[a],image:s}),kakao.maps.event.addListener(this.markers[a],"click",(function(){t.apt=t.apts[a],t.showDetail(t.apt),t.closeRoadView()}));const e=this.markerPositions.reduce(((t,e)=>t.extend(e)),new kakao.maps.LatLngBounds);this.map.setBounds(e)}},getAptPositions(){if(window.kakao&&window.kakao.maps){let t=new kakao.maps.services.Geocoder,e=this;for(let a=0;a<this.apts.length;a++)t.addressSearch(this.sido+" "+this.apts[a].도로명+" "+this.apts[a].도로명건물본번호코드,(function(t,s){if(s===kakao.maps.services.Status.OK){let s=new kakao.maps.LatLng(t[0].y,t[0].x);e.markerPositions[a]=s,e.apts[a].index=a,e.apts[a].La=s.La,e.apts[a].Ma=s.Ma,a==e.apts.length-1&&setTimeout((()=>{e.displayMarker()}),500)}}))}},showDetail(t){this.apt=t,this.detailToggle=!0;let e=new kakao.maps.LatLng(t.Ma,t.La);this.map.setLevel(2),this.map.setCenter(e)},showRoadView(t){let e=document.getElementById("roadview"),a=new kakao.maps.Roadview(e),s=new kakao.maps.RoadviewClient,i={},o=new kakao.maps.LatLng(t.Ma,t.La);s.getNearestPanoId(o,100,(function(t){a.setPanoId(t,o)})),kakao.maps.event.addListener(a,"init",(function(){let e=new kakao.maps.Marker({position:o,map:a});e.setAltitude(10),e.setRange(100);let s=a.getProjection(),r=s.viewpointFromCoords(e.getPosition(),e.getAltitude());a.setViewpoint(r);let n=new kakao.maps.InfoWindow({position:o,content:t.아파트});n.open(a,e),i.pan=r.pan,i.tilt=r.tilt,i.zoom=r.zoom}))},closeDetail(){this.detailToggle=!1},closeRoadView(){this.roadViewToggle=!1},printRoadView(t){this.showRoadView(this.apts[t]),this.roadViewToggle=!0},createCategorySearch(){let t=this,e=new kakao.maps.CustomOverlay({zIndex:5}),a=document.createElement("div"),s=[],i="",o=new kakao.maps.services.Places(this.map);function r(t,e,a){t.addEventListener?t.addEventListener(e,a):t.attachEvent("on"+e,a)}function n(){i&&(e.setMap(null),p(),o.categorySearch(i,l,{useMapBounds:!0}))}function l(e,a){a===kakao.maps.services.Status.OK?(t.category=e,c(e)):a===kakao.maps.services.Status.ZERO_RESULT||kakao.maps.services.Status.ERROR}function c(t){let e=document.getElementById(i).getAttribute("data-order");for(let a=0;a<t.length;a++){let s=d(new kakao.maps.LatLng(t[a].y,t[a].x),e);(function(t,e){kakao.maps.event.addListener(t,"click",(function(){m(e)}))})(s,t[a])}}function d(e,a){let i="https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/places_category.png",o=new kakao.maps.Size(27,28),r={spriteSize:new kakao.maps.Size(72,208),spriteOrigin:new kakao.maps.Point(46,36*a),offset:new kakao.maps.Point(11,28)},n=new kakao.maps.MarkerImage(i,o,r),l=new kakao.maps.Marker({position:e,image:n});return l.setMap(t.map),s.push(l),l}function p(){for(let t=0;t<s.length;t++)s[t].setMap(null);s=[]}function m(s){let i='<div class="placeinfo">   <a class="title" href="'+s.place_url+'" target="_blank" title="'+s.place_name+'">'+s.place_name+"</a>";s.road_address_name?i+='    <span title="'+s.road_address_name+'">'+s.road_address_name+'</span>  <span class="jibun" title="'+s.address_name+'">(지번 : '+s.address_name+")</span>":i+='    <span title="'+s.address_name+'">'+s.address_name+"</span>",i+='    <span class="tel">'+s.phone+'</span></div><div class="after"></div>',a.innerHTML=i,e.setPosition(new kakao.maps.LatLng(s.y,s.x)),e.setMap(t.map)}function h(){let t=document.getElementById("category"),e=t.children;for(let a=0;a<e.length;a++)e[a].onclick=g}function g(){t.category=[];let a=this.id,s=this.className;e.setMap(null),"on"===s?(i="",u(),p()):(i=a,u(this),n())}function u(t){let e,a=document.getElementById("category"),s=a.children;for(e=0;e<s.length;e++)s[e].className="";t&&(t.className="on")}kakao.maps.event.addListener(this.map,"idle",n),kakao.maps.event.addListener(this.map,"idle",this.getInfo),a.className="placeinfo_wrap",r(a,"mousedown",kakao.maps.event.preventMap),r(a,"touchstart",kakao.maps.event.preventMap),e.setContent(a),h()},setOverlayMapTypeId(){let t=document.getElementById("chkTerrain"),e=document.getElementById("chkTraffic"),a=document.getElementById("chkBicycle"),s=document.getElementById("chkUseDistrict");for(var i in this.mapTypes)this.map.removeOverlayMapTypeId(this.mapTypes[i]);s.checked&&this.map.addOverlayMapTypeId(this.mapTypes.useDistrict),t.checked&&this.map.addOverlayMapTypeId(this.mapTypes.terrain),e.checked&&this.map.addOverlayMapTypeId(this.mapTypes.traffic),a.checked&&this.map.addOverlayMapTypeId(this.mapTypes.bicycle)}}},j=z,U=(0,p.Z)(j,s,i,!1,null,null,null),G=U.exports}}]);
//# sourceMappingURL=265.40253d56.js.map